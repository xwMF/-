<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>闭包和面向对象1</title>
	</head>
	
<body>
    <div>
    	<button id='execute'>点击我执行命令</button>
    	<button id='undo'>点击我执行命令</button>
    </div>
</body>
<script>
   //demo1 面向对象实现命令模式
    var TV={
    	open:function(){
    		console.log('打开电视机');
    	},
    	close:function(){
            console.log("关上电视机");
    	}
    };
//  var OpenTvCommand=function(receiver){
//  	this.receiver=receiver;
//  };
    function OpenTvCommand(receiver){
    	this.receiver = receiver;
    }
    OpenTvCommand.prototype.execute=function(){
       this.receiver.open();    // 执行命令,打开电视机
    };
    OpenTvCommand.prototype.undo=function(){
       this.receiver.close();  // 执行命令,关闭电视机
    };
 
    var setCommand=function(command){
    	document.getElementById('execute').onclick=function(){
			command.execute();   // 输出：打开电视机
		}
		document.getElementById("undo").onclick=function(){
			command.undo();   // 输出：关闭电视机
		}
    }
 
    setCommand(new OpenTvCommand(TV))
    
    // 命令模式的意图是把请求封装为对象，从而分离请求的发起者和请求的接收者（执行者）之
    // 间的耦合关系。在命令被执行之前，可以预先往命令对象中植入命令的接收者。
    
    
    // 参考：https://blog.csdn.net/qq_40083134/article/details/81474598
   </script>
</html>
